{"version":3,"sources":["../src/ColorPicker.js"],"names":[],"mappings":"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","file":"ColorPicker.js","sourcesContent":["var React = require(\"react\"),\r\n    tinycolor = require(\"tinycolor2\");\r\n\r\n\r\nvar SB_PICKER_WIDTH = SB_PICKER_HEIGHT = 128;\r\nvar SB_PICKER_CURSOR_WIDTH = SB_PICKER_CURSOR_HEIGHT = 14;\r\nvar H_PICKER_HEIGHT = 128;\r\nvar H_PICKER_CURSOR_HEIGHT = 3;\r\n\r\n\r\nvar TwoStopGradient = React.createClass({\r\n\r\n  getDefaultProps: function() {\r\n    return {\r\n      horizontal: false\r\n    }\r\n  },\r\n\r\n  propTypes: {\r\n    color1: React.PropTypes.string.isRequired,\r\n    color2: React.PropTypes.string.isRequired,\r\n    horizontal: React.PropTypes.bool\r\n  },\r\n\r\n  render: function() {\r\n    var angle = this.props.horizontal ? \"to right, \" : \"\";\r\n    var styles = {\r\n      background: \"linear-gradient(\"+angle+this.props.color1+\", \"+this.props.color2+\")\"\r\n    };\r\n    return (\r\n      <div className={this.props.className} style={styles}></div>\r\n    )\r\n  }\r\n\r\n});\r\n\r\n\r\nvar SaturationBrightnessCursor = React.createClass({\r\n\r\n  getDefaultProps: function() {\r\n    return {\r\n      position: {x: 0, y: 0}\r\n    }\r\n  },\r\n\r\n  propTypes: {\r\n    position: React.PropTypes.shape({\r\n      x: React.PropTypes.number,\r\n      y: React.PropTypes.number\r\n    }).isRequired\r\n  },\r\n\r\n  render: function() {\r\n    // We center the cursor around our x/y position\r\n    var style = {\r\n      left: this.props.position.x - Math.round(SB_PICKER_CURSOR_WIDTH * 0.5),\r\n      top: this.props.position.y - Math.round(SB_PICKER_CURSOR_HEIGHT * 0.5)\r\n    };\r\n    return (\r\n      <div className=\"rui-color-picker__sb-picker-cursor\" style={style}></div>\r\n    )\r\n  }\r\n\r\n});\r\n\r\n\r\nvar SaturationBrightnessPicker = React.createClass({\r\n\r\n  getInitialState: function() {\r\n    return {\r\n      cursorPosition: {\r\n        x: Math.round(SB_PICKER_WIDTH * this.props.saturation),\r\n        y: Math.round(SB_PICKER_HEIGHT * (1 - this.props.brightness))\r\n      },\r\n      mouseDown: false,\r\n      hue: 0\r\n    }\r\n  },\r\n\r\n  getDefaultProps: function() {\r\n    return {\r\n      saturation: 1,\r\n      brightness: 0\r\n    }\r\n  },\r\n\r\n  propTypes: {\r\n    onChange: React.PropTypes.func.isRequired,\r\n    hue: React.PropTypes.number.isRequired,\r\n    saturation: React.PropTypes.number,\r\n    brightness: React.PropTypes.number,\r\n  },\r\n\r\n  onMouseDownHandler: function(e) {\r\n    e.preventDefault();\r\n    window.addEventListener(\"mouseup\", this.onMouseUpHandler);\r\n    window.addEventListener(\"mousemove\", this.onMouseMoveHandler);\r\n    this._update(e.nativeEvent.pageX, e.nativeEvent.pageY, true);\r\n  },\r\n\r\n  onMouseUpHandler: function(e) {\r\n    window.removeEventListener(\"mouseup\", this.onMouseUpHandler);\r\n    window.removeEventListener(\"mousemove\", this.onMouseMoveHandler);\r\n    this._update(e.pageX, e.pageY, false);\r\n  },\r\n\r\n  onMouseMoveHandler: function(e) {\r\n    this._update(e.pageX, e.pageY, true);\r\n  },\r\n\r\n  _update: function(pageX, pageY, mouseDown) {\r\n    // Get the position of the root element relative to the document.\r\n    var rootPos = this.refs.root.getDOMNode().getBoundingClientRect();\r\n    // Convert coordinates into local space.\r\n    var x = pageX - rootPos.left;\r\n    var y = pageY - (rootPos.top + window.scrollY);\r\n    // Keep x and y within our bounds\r\n    x = x < 0 ? 0 : x;\r\n    x = x > SB_PICKER_WIDTH ? SB_PICKER_WIDTH : x;\r\n    y = y < 0 ? 0 : y;\r\n    y = y > SB_PICKER_HEIGHT ? SB_PICKER_HEIGHT : y;\r\n    // Normalize to saturation and brightness ratios\r\n    var saturation = x / SB_PICKER_WIDTH;\r\n    var brightness = 1 - (y / SB_PICKER_HEIGHT);\r\n    this.setState({\r\n      mouseDown: mouseDown,\r\n      cursorPosition: {x: x, y: y}\r\n    });\r\n    this.props.onChange(saturation, brightness);\r\n  },\r\n\r\n  render: function() {\r\n    var className = \"rui-color-picker__sb-picker\";\r\n    className += this.state.mouseDown ? \" rui-color-picker__sb-picker--dragging\" : \"\";\r\n\r\n    var hue = \"hsl(\"+Math.round(360 * this.props.hue)+\", 100%, 50%)\";\r\n\r\n    return(\r\n      <div className={className}\r\n           ref=\"root\"\r\n           onMouseDown={this.onMouseDownHandler}>\r\n        <TwoStopGradient className=\"rui-color-picker__sb-picker-layer\"\r\n                         color1=\"white\"\r\n                         color2={hue}\r\n                         horizontal={true}/>\r\n        <TwoStopGradient className=\"rui-color-picker__sb-picker-layer\"\r\n                         color1=\"rgba(0, 0, 0, 0)\"\r\n                         color2=\"black\" />\r\n        <SaturationBrightnessCursor position={this.state.cursorPosition} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n});\r\n\r\n\r\nvar HuePickerCursor = React.createClass({\r\n\r\n  getDefaultProps: function() {\r\n    return {\r\n      position: 0\r\n    }\r\n  },\r\n\r\n  render: function() {\r\n    // We vertically center the cursor around our y position and make sure\r\n    // we're always within HuePicker's bounds.\r\n    var y = this.props.position - Math.floor(H_PICKER_CURSOR_HEIGHT * 0.5);\r\n    y = (y + H_PICKER_CURSOR_HEIGHT) > H_PICKER_HEIGHT ?\r\n        H_PICKER_HEIGHT - H_PICKER_CURSOR_HEIGHT :\r\n        y;\r\n    y = y < 0 ? 0 : y;\r\n    var styles = {\r\n      top: y\r\n    };\r\n    return (\r\n      <div className=\"rui-color-picker__h-picker-cursor\" style={styles}></div>\r\n    );\r\n  }\r\n\r\n});\r\n\r\n\r\nvar HuePicker = React.createClass({\r\n\r\n  getInitialState: function() {\r\n    return {\r\n      mouseDown: false,\r\n      cursorPosition: Math.round(H_PICKER_HEIGHT * this.props.hue)\r\n    }\r\n  },\r\n\r\n  propTypes: {\r\n    hue: React.PropTypes.number.isRequired,\r\n    onChange: React.PropTypes.func.isRequired\r\n  },\r\n\r\n  onMouseDownHandler: function(e) {\r\n    e.preventDefault();\r\n    window.addEventListener(\"mouseup\", this.onMouseUpHandler);\r\n    window.addEventListener(\"mousemove\", this.onMouseMoveHandler);\r\n    this._update(e.nativeEvent.pageY, true);\r\n  },\r\n\r\n  onMouseUpHandler: function(e) {\r\n    window.removeEventListener(\"mouseup\", this.onMouseUpHandler);\r\n    window.removeEventListener(\"mousemove\", this.onMouseMoveHandler);\r\n    this._update(e.pageY, false);\r\n  },\r\n\r\n  onMouseMoveHandler: function(e) {\r\n    this._update(e.pageY, true);\r\n  },\r\n\r\n  _update: function(pageY, mouseDown) {\r\n    // Get the position of the root element relative to the document.\r\n    var rootPos = this.refs.root.getDOMNode().getBoundingClientRect();\r\n    // Convert coordinate into local space.\r\n    var y = pageY - (rootPos.top + window.scrollY);\r\n    // Keep y within our bounds\r\n    y = y < 0 ? 0 : y;\r\n    y = y > H_PICKER_HEIGHT ? H_PICKER_HEIGHT : y;\r\n    // Normalize to a ratio\r\n    var hue = y / H_PICKER_HEIGHT;\r\n    this.setState({\r\n      mouseDown: mouseDown,\r\n      cursorPosition: y\r\n    });\r\n    this.props.onChange(hue);\r\n  },\r\n\r\n  render: function() {\r\n    var className = \"rui-color-picker__h-picker\";\r\n    className += this.state.mouseDown ? \" rui-color-picker__h-picker--dragging\" : \"\";\r\n    return (\r\n      <div className={className} onMouseDown={this.onMouseDownHandler} ref=\"root\">\r\n        <HuePickerCursor position={this.state.cursorPosition} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n});\r\n\r\nvar ColorPicker = React.createClass({\r\n\r\n  getInitialState: function() {\r\n    var hsv = tinycolor(this.props.color).toHsv();\r\n    return {\r\n      hue: hsv.h / 360,\r\n      saturation: hsv.s,\r\n      brightness: hsv.v\r\n    }\r\n  },\r\n\r\n  propTypes: {\r\n    color: React.PropTypes.oneOfType([\r\n      React.PropTypes.string,\r\n      React.PropTypes.object\r\n    ]),\r\n    onChange: React.PropTypes.func.isRequired\r\n  },\r\n\r\n  saturationBrightnessChangeHandler: function(saturation, brightness) {\r\n    this.setState({\r\n      saturation: saturation,\r\n      brightness: brightness\r\n    });\r\n    this._update();\r\n  },\r\n\r\n  hueChangeHandler: function(hue) {\r\n    this.setState({\r\n      hue: hue\r\n    });\r\n    this._update();\r\n  },\r\n\r\n  _update: function() {\r\n    var color = tinycolor({\r\n      h: Math.round(360 * this.state.hue),\r\n      s: this.state.saturation,\r\n      v: this.state.brightness\r\n    });\r\n    this.props.onChange(color);\r\n  },\r\n\r\n  render: function() {\r\n    return(\r\n      <div>\r\n        <SaturationBrightnessPicker onChange={this.saturationBrightnessChangeHandler}\r\n                                    hue={this.state.hue}\r\n                                    saturation={this.state.saturation}\r\n                                    brightness={this.state.brightness} />\r\n        <HuePicker onChange={this.hueChangeHandler}\r\n                   hue={this.state.hue} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n});\r\n\r\n\r\nmodule.exports = ColorPicker;\r\n"]}